Private ['_config','_element','_get','_i','_info','_prefix','_proceed','_u','_z'];

_u = [];
_i = [];

/* _i = _i + [[label, picture, config, belong to type, cost, upgrade level, allowed in camps, belong to the handgun pool, magazines, magazine space, allow two weapons]]*/

/* Magazines - West */
_u = _u + ['ACE_10Rnd_127x99_T_m107'];
_i = _i + [['','','CfgMagazines','primary',18,0,true,false,0,0,true]];

_u = _u + ['ACE_10Rnd_127x99_Raufoss_m107'];
_i = _i + [['','','CfgMagazines','primary',23,0,true,false,0,0,true]];

_u = _u + ['ACE_5Rnd_25x59_HEDP_Barrett'];
_i = _i + [['','','CfgMagazines','primary',33,0,true,false,0,0,true]];

_u = _u + ['ACE_5Rnd_127x99_B_TAC50'];
_i = _i + [['','','CfgMagazines','primary',12,0,true,false,0,0,true]];

_u = _u + ['ACE_5Rnd_127x99_S_TAC50'];
_i = _i + [['','','CfgMagazines','primary',22,0,true,false,0,0,true]];

_u = _u + ['ACE_5Rnd_127x99_T_TAC50'];
_i = _i + [['','','CfgMagazines','primary',14,0,true,false,0,0,true]];

_u = _u + ['ACE_20Rnd_762x51_B_HK417'];
_i = _i + [['','','CfgMagazines','primary',8,0,true,false,0,0,true]];

_u = _u + ['ACE_20Rnd_762x51_T_HK417'];
_i = _i + [['','','CfgMagazines','primary',9,0,true,false,0,0,true]];

_u = _u + ['ACE_30Rnd_556x45_T_G36'];
_i = _i + [['','','CfgMagazines','primary',8,0,true,false,0,0,true]];

_u = _u + ['ACE_30Rnd_556x45_T_Stanag'];
_i = _i + [['','','CfgMagazines','primary',6,0,true,false,0,0,true]];

_u = _u + ['ACE_200Rnd_556x45_T_M249'];
_i = _i + [['','','CfgMagazines','primary',15,0,true,false,0,0,true]];

_u = _u + ['ACE_100Rnd_556x45_T_M249'];
_i = _i + [['','','CfgMagazines','primary',25,0,true,false,0,0,true]];

_u = _u + ['ACE_15Rnd_9x19_P226'];
_i = _i + [['','','CfgMagazines','sidearm',2,0,true,true,0,0,true]];

_u = _u + ['ACE_15Rnd_9x19_P8'];
_i = _i + [['','','CfgMagazines','sidearm',2,0,true,true,0,0,true]];

_u = _u + ['ACE_40Rnd_B_46x30_MP7'];
_i = _i + [['','','CfgMagazines','primary',5,0,true,true,0,0,true]];

_u = _u + ['ACE_25Rnd_1143x23_B_UMP45'];
_i = _i + [['','','CfgMagazines','primary',5,0,true,true,0,0,true]];

_u = _u + ['ACE_25Rnd_1143x23_S_UMP45'];
_i = _i + [['','','CfgMagazines','primary',7,0,true,true,0,0,true]];

_u = _u + ['ACE_12Rnd_45ACP_USP'];
_i = _i + [['','','CfgMagazines','sidearm',3,0,true,true,0,0,true]];

_u = _u + ['ACE_12Rnd_45ACP_USPSD'];
_i = _i + [['','','CfgMagazines','sidearm',4,0,true,true,0,0,true]];

/* Primary weapons - West */
_u = _u + ['ACE_G36A2_Bipod_D'];
_i = _i + [['','','CfgWeapons','',230,1,false,false,0,0,true]];

_u = _u + ['ACE_G36A1_AG36A1_D'];
_i = _i + [['','','CfgWeapons','',240,2,false,false,0,0,true]];

_u = _u + ['ACE_M60'];
_i = _i + [['','','CfgWeapons','',150,0,true,false,0,0,false]];

_u = _u + ['ACE_M240L'];
_i = _i + [['','','CfgWeapons','',165,0,true,false,0,0,false]];

_u = _u + ['ACE_M240L_M145'];
_i = _i + [['','','CfgWeapons','',175,0,true,false,0,0,false]];

_u = _u + ['ACE_HK416_D10'];
_i = _i + [['','','CfgWeapons','',100,0,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D10_AIM'];
_i = _i + [['','','CfgWeapons','',110,0,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D10_COMPM3'];
_i = _i + [['','','CfgWeapons','',115,1,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D10_COMPM3_SD'];
_i = _i + [['','','CfgWeapons','',135,3,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D10_Holo'];
_i = _i + [['','','CfgWeapons','',115,1,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D10_M320'];
_i = _i + [['','','CfgWeapons','',140,1,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D10_SD'];
_i = _i + [['','','CfgWeapons','',125,2,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D14'];
_i = _i + [['','','CfgWeapons','',100,1,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D14_ACOG_PVS14'];
_i = _i + [['','','CfgWeapons','',130,2,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D14_COMPM3'];
_i = _i + [['','','CfgWeapons','',115,1,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D14_COMPM3_M320'];
_i = _i + [['','','CfgWeapons','',140,2,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D14_SD'];
_i = _i + [['','','CfgWeapons','',120,1,true,false,0,0,true]];

_u = _u + ['ACE_HK416_D14_TWS'];
_i = _i + [['','','CfgWeapons','',160,3,true,false,0,0,true]];

_u = _u + ['ACE_HK417_Eotech_4x'];
_i = _i + [['','','CfgWeapons','',130,2,true,false,0,0,true]];

_u = _u + ['ACE_HK417_leupold'];
_i = _i + [['','','CfgWeapons','',140,2,true,false,0,0,true]];

_u = _u + ['ACE_HK417_micro'];
_i = _i + [['','','CfgWeapons','',115,1,true,false,0,0,true]];

_u = _u + ['ACE_HK417_Shortdot'];
_i = _i + [['','','CfgWeapons','',145,3,true,false,0,0,true]];

_u = _u + ['ACE_M4'];
_i = _i + [['','','CfgWeapons','',85,0,true,false,0,0,true]];

_u = _u + ['ACE_M4_ACOG'];
_i = _i + [['','','CfgWeapons','',95,1,true,false,0,0,true]];

_u = _u + ['ACE_M4_Aim'];
_i = _i + [['','','CfgWeapons','',95,1,true,false,0,0,true]];

_u = _u + ['ACE_M4_AIM_GL'];
_i = _i + [['','','CfgWeapons','',125,2,true,false,0,0,true]];

_u = _u + ['ACE_M4_Eotech'];
_i = _i + [['','','CfgWeapons','',95,1,true,false,0,0,true]];

_u = _u + ['ACE_M4_Eotech_GL'];
_i = _i + [['','','CfgWeapons','',125,2,true,false,0,0,true]];

_u = _u + ['ACE_M4_GL'];
_i = _i + [['','','CfgWeapons','',105,2,true,false,0,0,true]];

_u = _u + ['ACE_M4_RCO_GL'];
_i = _i + [['','','CfgWeapons','',125,2,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_ACOG'];
_i = _i + [['','','CfgWeapons','',155,1,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_ACOG_SD'];
_i = _i + [['','','CfgWeapons','',165,3,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_AIM_GL'];
_i = _i + [['','','CfgWeapons','',195,2,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_AIM_GL_SD'];
_i = _i + [['','','CfgWeapons','',205,3,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_Aim_SD'];
_i = _i + [['','','CfgWeapons','',185,2,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_Eotech'];
_i = _i + [['','','CfgWeapons','',105,1,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_GL'];
_i = _i + [['','','CfgWeapons','',195,2,true,false,0,0,true]];

_u = _u + ['ACE_M4A1_GL_SD'];
_i = _i + [['','','CfgWeapons','',205,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1'];
_i = _i + [['','','CfgWeapons','',115,1,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_Aim'];
_i = _i + [['','','CfgWeapons','',125,2,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_AIM_SD'];
_i = _i + [['','','CfgWeapons','',135,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_Eotech'];
_i = _i + [['','','CfgWeapons','',125,2,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_Eotech_4x'];
_i = _i + [['','','CfgWeapons','',135,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_GL'];
_i = _i + [['','','CfgWeapons','',145,2,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_GL_13'];
_i = _i + [['','','CfgWeapons','',135,2,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_GL_AIMPOINT'];
_i = _i + [['','','CfgWeapons','',155,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_GL_EOTECH'];
_i = _i + [['','','CfgWeapons','',155,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_GL_SD'];
_i = _i + [['','','CfgWeapons','',155,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_RCO_GL'];
_i = _i + [['','','CfgWeapons','',155,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_SD_9'];
_i = _i + [['','','CfgWeapons','',125,1,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_SHORTDOT'];
_i = _i + [['','','CfgWeapons','',145,2,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_SHORTDOT_SD'];
_i = _i + [['','','CfgWeapons','',155,3,true,false,0,0,true]];

_u = _u + ['ACE_SOC_M4A1_TWS'];
_i = _i + [['','','CfgWeapons','',195,3,true,false,0,0,true]];

_u = _u + ['ACE_SPAS12'];
_i = _i + [['','','CfgWeapons','',120,0,true,false,0,0,true]];

_u = _u + ['ACE_UMP45'];
_i = _i + [['','','CfgWeapons','',70,0,true,false,0,0,true]];

_u = _u + ['ACE_UMP45_AIM'];
_i = _i + [['','','CfgWeapons','',80,1,true,false,0,0,true]];

_u = _u + ['ACE_UMP45_AIM_SD'];
_i = _i + [['','','CfgWeapons','',100,3,true,false,0,0,true]];

_u = _u + ['ACE_UMP45_SD'];
_i = _i + [['','','CfgWeapons','',90,2,true,false,0,0,true]];

_u = _u + ['ACE_Mk12mod1'];
_i = _i + [['','','CfgWeapons','',210,1,true,false,0,0,true]];

_u = _u + ['ACE_Mk12mod1_SD'];
_i = _i + [['','','CfgWeapons','',220,2,true,false,0,0,true]];

_u = _u + ['ACE_MP5A4'];
_i = _i + [['','','CfgWeapons','',50,0,true,false,0,0,true]];

_u = _u + ['ACE_MP5A5'];
_i = _i + [['','','CfgWeapons','',60,1,true,false,0,0,true]];

_u = _u + ['ACE_MP5SD'];
_i = _i + [['','','CfgWeapons','',80,2,true,false,0,0,true]];

_u = _u + ['ACE_MP7'];
_i = _i + [['','','CfgWeapons','',90,0,true,false,0,0,true]];

_u = _u + ['ACE_MP7_RSAS'];
_i = _i + [['','','CfgWeapons','',100,1,true,false,0,0,true]];

_u = _u + ['ACE_M109'];
_i = _i + [['','','CfgWeapons','',510,3,false,false,0,0,false]];

_u = _u + ['ACE_M110'];
_i = _i + [['','','CfgWeapons','',300,1,false,false,0,0,false]];

_u = _u + ['ACE_M110_SD'];
_i = _i + [['','','CfgWeapons','',320,2,false,false,0,0,false]];

_u = _u + ['ACE_TAC50'];
_i = _i + [['','','CfgWeapons','',410,3,false,false,0,0,false]];

_u = _u + ['ACE_TAC50_SD'];
_i = _i + [['','','CfgWeapons','',470,3,false,false,0,0,false]];

_u = _u + ['ACE_MG36_D'];
_i = _i + [['','','CfgWeapons','',250,2,false,false,0,0,false]];

/* Secondary weapons - West */
_u = _u + ['ACE_M224TripodProxy'];
_i = _i + [['','','CfgVehicles','',550,2,true,false,0,0,false]];

_u = _u + ['ACE_M224Proxy'];
_i = _i + [['','','CfgVehicles','',40,2,true,false,0,0,false]];

_u = _u + ['ACE_VTAC_RUSH72_ACU'];
_i = _i + [['','','CfgVehicles','',90,2,true,false,0,0,false]];

_u = _u + ['ACE_BackPack_ACR_TT'];
_i = _i + [['','','CfgVehicles','',90,2,true,false,0,0,false]];

_u = _u + ['ACE_CharliePack_ACU'];
_i = _i + [['','','CfgVehicles','',90,2,true,false,0,0,false]];

_u = _u + ['ACE_CharliePack_ACU_Medic'];
_i = _i + [['','','CfgVehicles','',90,2,true,false,0,0,false]];

_u = _u + ['ACE_M252Proxy'];
_i = _i + [['','','CfgVehicles','',750,1,false,false,0,0,false]];

_u = _u + ['ACE_M252TripodProxy'];
_i = _i + [['','','CfgVehicles','',40,1,false,false,0,0,false]];

/* Pistols - West */
_u = _u + ['ACE_USP'];
_i = _i + [['','','CfgWeapons','',35,1,true,false,0,0,true]];

_u = _u + ['ACE_USPSD'];
_i = _i + [['','','CfgWeapons','',45,2,true,false,0,0,true]];

_u = _u + ['ACE_P226'];
_i = _i + [['','','CfgWeapons','',30,1,true,false,0,0,true]];

_u = _u + ['ACE_P8'];
_i = _i + [['','','CfgWeapons','',20,0,true,false,0,0,true]];

/* Misc - West */
_u = _u + ['ACE_HuntIR_M203'];
_i = _i + [['','','CfgMagazines','CfgMagazines',32,0,true,true,0,0,true]];

_u = _u + ['ACE_FlareIR_M203'];
_i = _i + [['','','CfgMagazines','CfgMagazines',12,0,true,true,0,0,true]];

_u = _u + ['ACE_Earplugs'];
_i = _i + [['','','CfgWeapons','Item',2,0,true,false,0,0,true]];

_u = _u + ['ACE_GlassesBalaklava'];
_i = _i + [['','','CfgWeapons','Item',5,0,true,false,0,0,true]];

_u = _u + ['ACE_GlassesGasMask_US'];
_i = _i + [['','','CfgWeapons','Item',15,0,true,false,0,0,true]];

_u = _u + ['ACE_GlassesTactical'];
_i = _i + [['','','CfgWeapons','Item',5,0,true,false,0,0,true]];

_u = _u + ['ACE_GlassesLHD_glasses'];
_i = _i + [['','','CfgWeapons','Item',10,0,true,false,0,0,true]];

_u = _u + ['ACE_HuntIR_monitor'];
_i = _i + [['','','CfgWeapons','Item',30,0,true,false,0,0,true]];

_u = _u + ['ACE_Javelin_CLU'];
_i = _i + [['','','CfgWeapons','Special',300,3,true,false,0,0,true]];

_u = _u + ['ACE_SpottingScope'];
_i = _i + [['','','CfgWeapons','Item',15,0,true,false,0,0,true]];

_u = _u + ['ACE_Kestrel4500'];
_i = _i + [['','','CfgWeapons','Item',25,0,true,false,0,0,true]];

for '_z' from 0 to (count _u)-1 do {
	_info = (_i select _z);
	_element = (_u select _z);
	_config = (_info select 2);
	
	if (isClass (configFile >> _config >> _element)) then {
		//--- The loadout has a prefix since we can have two elements with the same name but with different class.
		_get = _element Call GetNamespace;
		_proceed = false;
		_prefix = "";
		
		if (isNil '_get') then {
			_proceed = true;
		} else {
			//--- Two elements can have the same name, like "Javelin(Weapon) >> Javelin (Magazine)", if two elements are found, we compare the class to see if they're already defined or not.
			if ((_get select 2) == _config) then {
				diag_log Format ["[WFBE (INIT)][frameno:%3 | ticktime:%4] Core_ACE_G: Duplicated Loadout Element found '%1' for class '%2'",_element,_config,diag_frameno,diag_tickTime];
			} else {
				//--- Is it a special class?
				_get = (_element+'_W') Call GetNamespace;
				if (isNil '_get') then {
					_prefix = '_W';
					_proceed = true;
				} else {
					diag_log Format ["[WFBE (INIT)][frameno:%3 | ticktime:%4] Core_ACE_G: Duplicated Loadout Element found '%1' for class '%2'",_element,_config,diag_frameno,diag_tickTime];
				};
			};
		};
		
		if (_proceed) then {
			//--- A custom loadout displayName can be set.
			if ((_info select 1) == '') then {_info set [0, [_element,'displayName',_config] Call GetConfigInfo]};
			_info set [1, [_element,'picture',_config] Call GetConfigInfo];
			
			if (_config == 'CfgWeapons') then {
				//--- A custom loadout magazine can be set.
				if (typeName (_info select 8) != 'ARRAY') then {
					_info set [8, getArray (configFile >> _config >> _element >> 'magazines')];
				};
			};
			
			//--- Set the magazine space.
			if (_config == 'CfgMagazines') then {
				if ((_info select 3) in ['CfgMagazines','primary','secondary','sidearm']) then {
					_info set [9, ceil(getNumber(configFile >> _config >> _element >> 'type') / 256)];
				};
			};

			[_element+_prefix,_info] Call SetNamespace;
		};
	} else {
		diag_log Format ["[WFBE (ERROR)][frameno:%3 | ticktime:%4] Core_ACE_G: Loadout Element '%1' with class '%2' is not a defined a class!",_element,_config,diag_frameno,diag_tickTime];
	};
};

diag_log Format ["[WFBE (INIT)][frameno:%2 | ticktime:%3] Core_ACE_G: Loadout Initialization (%1 Elements) - [Done]",count _u,diag_frameno,diag_tickTime];